{% extends "base.html" %}
{% block content %}

<div class="admin-container">

<h2>üìù Create New Blog Post</h2>

<form method="POST" enctype="multipart/form-data">

<!-- Title -->
<label>Title</label>
<input type="text" id="title" name="title" required>

<!-- Slug -->
<label>Slug (Auto Generated)</label>
<input type="text" id="slug" name="slug">

<!-- Category -->
<label>Category</label>
<select name="category">
    <option value="entertainment">Entertainment</option>
    <option value="news">News</option>
    <option value="tech">Tech</option>
    <option value="ott">OTT</option>
</select>

<!-- Tags -->
<label>Tags (comma separated)</label>
<input type="text" name="tags" placeholder="rashmika, vijay, wedding">

<!-- Featured Image -->
<label>Featured Image</label>
<input type="file" name="image" accept="image/*">

<!-- SEO -->
<hr>
<h3>üîç SEO Settings</h3>

<label>Meta Title</label>
<input type="text" name="meta_title">

<label>Meta Description</label>
<textarea name="meta_description" rows="3"></textarea>

<hr>

<label>Content</label>
<textarea id="editor" name="content"></textarea>

<br><br>

<button type="submit" name="status" value="draft" class="draft-btn">
    Save Draft
</button>

<button type="submit" name="status" value="publish" class="publish-btn">
    Publish Post
</button>

</form>
</div>

<style>
.admin-container{
    max-width:900px;
    margin:auto;
    padding:30px;
}

input, select, textarea{
    width:100%;
    padding:10px;
    margin-bottom:15px;
}

.publish-btn{
    background:black;
    color:white;
    padding:10px 20px;
    border:none;
}

.draft-btn{
    background:gray;
    color:white;
    padding:10px 20px;
    border:none;
}
</style>


<!-- TinyMCE Advanced -->
<script src="https://cdn.tiny.cloud/1/no-api-key/tinymce/6/tinymce.min.js"></script>

<script>
tinymce.init({
  selector: '#editor',
  height: 500,
  plugins: 'lists link image media table code fullscreen preview',
  toolbar: `
    undo redo | styles | bold italic underline |
    alignleft aligncenter alignright |
    bullist numlist |
    link image media table |
    preview fullscreen | code
  `,
  automatic_uploads: true,
  images_upload_url: '/upload-inline-image',
  file_picker_types: 'image',
});
</script>

<script>
document.getElementById("title").addEventListener("keyup", function(){
    let slug = this.value
        .toLowerCase()
        .replace(/ /g,'-')
        .replace(/[^\w-]+/g,'');
    document.getElementById("slug").value = slug;
});
</script>

{% endblock %}